---
title: "[Golang Learning]  GC"
short: "Garbage collection mechanism."
date: 11.Oct.2017
tags:
    - c
    - golang
    - server
    - notes
---

## 什么是垃圾回收？
对不再使用的内存资源进行自动回收的行为成为垃圾回收。

## 常见的垃圾回收方法

### 引用计算（Reference Counting）

对每一个对象维护一个引用计数，当引用该对象的对象被销毁或更新时，被引用对象的引用计数减一，当被引用对象被创建或被赋值给其他对象时引用计数自动加一。

优缺点：
1. 性能低下，频繁的更新引用计数；
2. 循环引用问题；

### 标记-清除（Mark and Sweep)

该方法分为两阶段：

1. 标记阶段：从root区域出发，扫描所有root区域的对象直接或间接引用到的对象，将这些对上全部加上标记（“被引用”）。
2. 清理阶段：扫描整个堆区，对所有没有标记过的对象进行回收（回收同时可能伴有碎片整理操作）。

这种方法解决了引用计数的不足，但是也有比较明显的问题：每次启动垃圾回收都会暂停当前所有的正常代码执行，回收是系统响应能力大大降低！当然后续也出现了很多mark&sweep算法的变种（如三色标记法）优化了这个问题。

### 分代收集（Generation）
将分区划分为两个或多个空间（称为“代”）。新创建的对象存储在新生代（young ggeneration）中，随着垃圾回收的重复执行，生命周期较长的对象会被提升到老年代中。这是就产生了两种垃圾回收方式，新生代垃圾回收和老年代垃圾回收。

## Golang 内存回收机制



## 参考资料